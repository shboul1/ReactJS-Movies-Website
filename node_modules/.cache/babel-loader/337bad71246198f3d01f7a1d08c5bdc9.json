{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/i5-10400f/Desktop/movies-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/i5-10400f/Desktop/movies-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/i5-10400f/Desktop/movies-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from'react';import SwiperCore,{Autoplay}from'swiper';import{Swiper,SwiperSlide}from'swiper/react';import'swiper/swiper-bundle.min.css';import'swiper/swiper.min.css';import tmdbApi,{category,movieType}from'../../api/tmdbAPI';import apiConfig from'../../api/APIConfig';import Button from'../Button/Button';import\"./HeroSlide.scss\";import{useHistory}from'react-router';import Modal,{ModalContent}from'../Modal/Modal';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var HeroSlide=function HeroSlide(){SwiperCore.use([Autoplay]);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),movies=_useState2[0],setMovies=_useState2[1];useEffect(function(){var getMovies=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var params,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:params={page:1};_context.prev=1;_context.next=4;return tmdbApi.getMoviesList(movieType.popular,{params:params});case 4:response=_context.sent;setMovies(response.results.slice(1,10));_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function getMovies(){return _ref.apply(this,arguments);};}();getMovies();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"hero-slide\",children:[/*#__PURE__*/_jsx(Swiper,{modules:[Autoplay],grabCursor:true,spaceBetween:0,slidesPerView:1,autoplay:{delay:3000},children:movies.map(function(item,i){return/*#__PURE__*/_jsx(SwiperSlide,{children:function children(_ref2){var isActive=_ref2.isActive;return/*#__PURE__*/_jsx(HeroSlideItem,{item:item});}},i);})}),movies.map(function(item,i){return/*#__PURE__*/_jsx(TrailerModal,{item:item},i);})]});};var HeroSlideItem=function HeroSlideItem(props){var hisrory=useHistory();var item=props.item;var background=apiConfig.originalImage(item.backdrop_path?item.backdrop_path:item.poster_path);var poster=apiConfig.w500Image(item.poster_path);var setModalActive=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var videos,modal,videSrc;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return tmdbApi.getVideos(category.movie,item.id);case 2:videos=_context2.sent;modal=document.querySelector(\"#modal_\".concat(item.id));if(videos.results.length>0){videSrc='https://www.youtube.com/embed/'+videos.results[0].key;modal.querySelector('.modal__content > iframe').setAttribute('src',videSrc);}else{modal.querySelector('.modal__content > iframe').innerHTML='No trailer';}modal.classList.toggle('active');case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function setModalActive(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"hero-slide\",children:/*#__PURE__*/_jsx(\"div\",{className:\"movie\",style:{backgroundImage:\"url(\".concat(background,\")\")},children:/*#__PURE__*/_jsxs(\"div\",{className:\"movie-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"movie-desc\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"movie-title\",children:item.title}),/*#__PURE__*/_jsx(\"p\",{className:\"movie-overview\",children:item.overview}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return hisrory.push('/movie/'+item.id);},children:\"Watch Now\"}),/*#__PURE__*/_jsx(Button,{btnstyle:\"btn--outlined\",onClick:setModalActive,children:\"Watch Trailer\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"movie-poster\",children:/*#__PURE__*/_jsx(\"img\",{src:poster,alt:item.title})})]})})});};var TrailerModal=function TrailerModal(props){var item=props.item;var iframeRef=useRef(null);var onClose=function onClose(){return iframeRef.current.setAttribute('src','');};return/*#__PURE__*/_jsx(Modal,{active:false,id:\"modal_\".concat(item.id),children:/*#__PURE__*/_jsx(ModalContent,{onClose:onClose,children:/*#__PURE__*/_jsx(\"iframe\",{ref:iframeRef,width:\"800px\",height:\"500px\",title:\"trailer\"})})});};export default HeroSlide;","map":{"version":3,"sources":["C:/Users/i5-10400f/Desktop/movies-react/src/components/HeroSlide/HeroSlide.jsx"],"names":["React","useState","useEffect","useRef","SwiperCore","Autoplay","Swiper","SwiperSlide","tmdbApi","category","movieType","apiConfig","Button","useHistory","Modal","ModalContent","HeroSlide","use","movies","setMovies","getMovies","params","page","getMoviesList","popular","response","results","slice","console","log","delay","map","item","i","isActive","HeroSlideItem","props","hisrory","background","originalImage","backdrop_path","poster_path","poster","w500Image","setModalActive","getVideos","movie","id","videos","modal","document","querySelector","length","videSrc","key","setAttribute","innerHTML","classList","toggle","backgroundImage","title","overview","push","TrailerModal","iframeRef","onClose","current"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useRef} from 'react'\r\nimport SwiperCore ,{ Autoplay } from 'swiper'\r\nimport {Swiper, SwiperSlide} from 'swiper/react'\r\nimport 'swiper/swiper-bundle.min.css'\r\nimport 'swiper/swiper.min.css'\r\nimport tmdbApi, {category, movieType} from '../../api/tmdbAPI'\r\nimport apiConfig from '../../api/APIConfig'\r\nimport Button from '../Button/Button'\r\nimport \"./HeroSlide.scss\"\r\nimport { useHistory } from 'react-router';\r\nimport Modal, { ModalContent } from '../Modal/Modal'\r\n\r\nconst HeroSlide = () => {\r\n    SwiperCore.use([Autoplay]);\r\n    const [movies, setMovies] = useState([])\r\n    useEffect(() => {\r\n        const getMovies = async () => {\r\n            const params = {page: 1}\r\n            try {\r\n                const response = await tmdbApi.getMoviesList(movieType.popular, {params});\r\n                setMovies(response.results.slice(1,10))\r\n            } catch (error) {\r\n                console.log(error)\r\n            }\r\n\r\n        }\r\n        getMovies();\r\n    },[])\r\n    return (\r\n        <div className=\"hero-slide\">\r\n            <Swiper\r\n                modules={[Autoplay]}\r\n                grabCursor={true}\r\n                spaceBetween={0}\r\n                slidesPerView={1}\r\n                autoplay={{delay: 3000}}>\r\n                {\r\n                    movies.map((item, i) => (\r\n                        <SwiperSlide key={i}>\r\n                            {({ isActive }) => (\r\n                                <HeroSlideItem item={item}/>\r\n                            )}\r\n                        </SwiperSlide>\r\n                    ))\r\n                }\r\n            </Swiper>\r\n           {\r\n               movies.map((item, i) => (\r\n                   <TrailerModal key={i} item={item} />\r\n               ))\r\n           }\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nconst HeroSlideItem = props => {\r\n    let hisrory = useHistory();\r\n    const item = props.item;\r\n    const background = apiConfig.originalImage(item.backdrop_path ? item.backdrop_path : item.poster_path)\r\n    const poster = apiConfig.w500Image(item.poster_path)\r\n\r\n    const setModalActive = async () => {\r\n        const videos = await tmdbApi.getVideos(category.movie, item.id)\r\n        const modal = document.querySelector(`#modal_${item.id}`)\r\n        if (videos.results.length > 0) {\r\n\r\n            const videSrc = 'https://www.youtube.com/embed/' + videos.results[0].key;\r\n            modal.querySelector('.modal__content > iframe').setAttribute('src', videSrc);\r\n\r\n        } else {\r\n            modal.querySelector('.modal__content > iframe').innerHTML = 'No trailer';\r\n        }\r\n        modal.classList.toggle('active')\r\n    }\r\n\r\n    return (\r\n        <div className=\"hero-slide\">\r\n            <div className=\"movie\" style={{backgroundImage: `url(${background})`}}>\r\n            <div className=\"movie-info\">\r\n                <div className=\"movie-desc\">\r\n                        <h1 className='movie-title'>{item.title}</h1>\r\n                        <p className='movie-overview'>{item.overview}</p>\r\n                        <div className=\"buttons\">\r\n                            <Button onClick={() => hisrory.push('/movie/' + item.id)}>Watch Now</Button>\r\n                            <Button btnstyle='btn--outlined' onClick={setModalActive}>Watch Trailer</Button>\r\n                        </div>\r\n                </div>\r\n                <div className=\"movie-poster\">\r\n                    <img src={poster} alt={item.title} />\r\n                </div>\r\n            </div>\r\n            </div>\r\n        </div>\r\n    )\r\n    \r\n}\r\n\r\n\r\n\r\nconst TrailerModal = props => {\r\n    const item = props.item;\r\n    const iframeRef = useRef(null);\r\n    const onClose = () => iframeRef.current.setAttribute('src', '');\r\n\r\n    return (\r\n        <Modal active={false} id={`modal_${item.id}`}>\r\n            <ModalContent onClose={onClose} >\r\n            <iframe ref={iframeRef} width=\"800px\" height=\"500px\" title=\"trailer\"></iframe>\r\n            </ModalContent>\r\n        </Modal>\r\n    )\r\n}\r\n\r\n\r\nexport default HeroSlide;\r\n"]},"metadata":{},"sourceType":"module"}